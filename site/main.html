<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Dashboard</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Amiri', serif;
            overflow-y: auto;
        }
        
        /* Main Website Content */
        #main-content {
            height: auto;
            min-height: 100vh;
            overflow-y: auto;
        }
        
        header {
            background-image: url('images/header-background.jpg');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 40px 20px;
            text-align: center;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
        }
        
        /* List-based navbar styles */
        .navbar {
            background-color: #444;
            overflow: visible;
            width: 100%;
            position: relative;
            z-index: 1000;
        }
        
        .navbar ul {
            list-style-type: none;
            padding: 0;
            margin: 0;
            display: flex;
        }
        
        .navbar li {
            position: relative;
            flex: 1;
            text-align: center;
        }
        
        .navbar a {
            display: block;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 18px;
            cursor: pointer;
        }
        
        .navbar a:hover {
            background-color: #555;
        }
        
        .navbar a.active {
            background-color: #666;
        }
        
        /* Dropdown styles */
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #555;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1001;
            width: 100%;
            left: 0;
            top: 100%;
        }
        
        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            display: block;
            text-align: left;
        }
        
        .dropdown-content a:hover {
            background-color: #666;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        .dropdown.active .dropdown-content {
            display: block;
        }
        
        /* Tab content styles */
        .tab-content {
            display: none;
            padding: 20px;
            min-height: calc(100vh - 230px);
            overflow: auto;
            background-color: #f9f9f9;
            position: relative;
            z-index: 1;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Footer styles */
        .footer {
            background-color: #444;
            color: white;
            text-align: center;
            padding: 10px 20px;
            width: 100%;
            font-size: 14px;
            margin-top: 0px;
        }
        
        .footer a {
            color: #fff;
            text-decoration: underline;
        }
        
        /* Login Form Styles */
        .login-form {
            max-width: 400px;
            margin: 40px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .login-form h3 {
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .login-btn:hover {
            background-color: #555;
        }
        
        /* Audio Message Area Styles */
        .messaging-container {
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .messaging-header {
            background-color: #444;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .messaging-header h3 {
            margin: 0;
        }
        
        .messaging-body {
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .message {
            display: flex;
            margin-bottom: 15px;
            position: relative;
        }
        
        .message-time {
            font-size: 12px;
            color: #888;
            min-width: 80px;
        }
        
        .message-content {
            flex-grow: 1;
            margin-left: 10px;
            padding: 10px;
            background-color: #f0f0f0;
            border-radius: 8px;
            position: relative;
        }
        
        .message-actions {
            position: absolute;
            right: 10px;
            top: 5px;
            display: none;
        }
        
        .message:hover .message-actions {
            display: block;
        }
        
        .delete-btn {
            background: none;
            border: none;
            color: #d9534f;
            cursor: pointer;
            font-size: 14px;
        }
        
        .messaging-footer {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            align-items: center;
        }
        
        .audio-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            width: 100%;
        }
        
        .audio-btn {
            padding: 10px 15px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .audio-btn:hover {
            background-color: #555;
        }
        
        .audio-btn i {
            margin-right: 5px;
        }
        
        .timer {
            margin-left: 15px;
            color: #666;
            font-size: 14px;
        }
        
        .audio-upload {
            display: none;
        }
        
        .recording-indicator {
            display: none;
            color: #d9534f;
            font-weight: bold;
            margin-left: 15px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Back button */
        .back-btn {
            margin-bottom: 20px;
            padding: 8px 16px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .back-btn:hover {
            background-color: #555;
        }
        
        /* Student list */
        .student-list {
            max-width: 600px;
            margin: 40px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .student-list h3 {
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .student-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .student-item:last-child {
            border-bottom: none;
        }
        
        .student-item:hover {
            background-color: #f5f5f5;
        }
        
        .student-name {
            font-weight: bold;
        }
        
        .new-message-indicator {
            background-color: #d9534f;
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="main-content">
        <header>
            <h1>Course Dashboard</h1>
        </header>
        
        <div class="navbar">
            <ul>
                <li><a href="#" class="active" onclick="openTab(event, 'main')">Main</a></li>
                <li><a href="#" onclick="openTab(event, 'syllabus')">Syllabus</a></li>
                <li><a href="#" onclick="openTab(event, 'calendar')">Calendar</a></li>
                <li class="dropdown">
                    <a href="#" onclick="toggleDropdown(event)">Life Cycle</a>
                    <div class="dropdown-content">
                        <a href="lifecycle-1.html">1. What is Called Living? </a>
                        <a href="lifecycle-2.html">2. Childhood, or The No-Place </a>
                        <a href="lifecycle-3.html">3. Real Life, or, The Workplace </a>
                        <a href="lifecycle-4.html">4. Nightlife, or, The Dark Side </a>
                        <a href="lifecycle-5.html">5. Untitled </a>
                        <a href="lifecycle-6.html">6. Untitled </a>
                        <a href="lifecycle-7.html">7. Untitled </a>
                        <a href="lifecycle-8.html">8. Untitled </a>
                        <a href="lifecycle-9.html">9. Untitled </a>
                        <a href="lifecycle-10.html">10. Untitled </a>
                    </div>
                </li>
                <li><a href="#" onclick="openTab(event, 'login')">Login</a></li>
            </ul>
        </div>
        
        <!-- Main tab content -->
        <div id="main" class="tab-content active">
            <h2>Welcome to "What is Called Living?"</h2>
            <p>This is the main landing page for our course. Use the navigation tabs above to explore different sections of the course site.</p>
            
            <div style="margin-top: 30px;">
                <h3>Course Highlights</h3>
                <ul>
                    <li>Explore the concept of "living" through various lenses</li>
                    <li>Engage in field trips, films, readings, and discussions</li>
                    <li>Develop critical thinking skills through philosophical inquiry</li>
                    <li>Participate in collective writing and self-examination activities</li>
                </ul>
            </div>
            
            <div style="margin-top: 30px;">
                <h3>Announcements</h3>
                <div style="background-color: #fff; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 15px;">
                    <h4 style="margin-top: 0;">Welcome to the Course!</h4>
                    <p>Please review the syllabus and complete the introductory reading by next week.</p>
                </div>
                <div style="background-color: #fff; padding: 15px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                    <h4 style="margin-top: 0;">Field Trip Scheduled</h4>
                    <p>Our first out-of-class activity is scheduled for Week 2, at the Bing Nursery School. Directions Here. Please sign up using this link.</p>
                </div>
            </div>
        </div>
        
        <!-- Syllabus tab content -->
        <div id="syllabus" class="tab-content">
            <h2>RELIGST18N: What is Called Living?</h2>
            <p>TTh 1:30 - 2:50, Location TBD</p>
            
            <h3>People</h3>
            <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 20px;">
                <!-- Instructor Information -->
                <div style="display: flex; align-items: center; flex: 1; min-width: 300px; background-color: #f5f5f5; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <div style="width: 80px; height: 80px; border-radius: 50%; overflow: hidden; margin-right: 15px;">
                        <!-- Image path in images folder -->
                        <img src="images/rushain.jpg" alt="Professor Rushain Abbasi" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div>
                        <h4 style="margin-top: 0; margin-bottom: 5px;">Professor Rushain Abbasi</h4>
                        <p style="margin: 0;"><a href="mailto:rushain@stanford.edu" style="color: #2d4059; text-decoration: none;">rushain@stanford.edu</a></p>
                        <p style="margin-top: 5px; font-size: 0.9em;">Office Hours: TBD</p>
                    </div>
                </div>
                
                <!-- CDA Information -->
                <div style="display: flex; align-items: center; flex: 1; min-width: 300px; background-color: #f5f5f5; padding: 15px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <div style="width: 80px; height: 80px; border-radius: 50%; overflow: hidden; margin-right: 15px;">
                        <!-- Image path in images folder -->
                        <img src="images/stephanie.jpg" alt="Stephanie Cho" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>
                    <div>
                        <h4 style="margin-top: 0; margin-bottom: 5px;">Stephanie Cho (CDA)</h4>
                        <p style="margin: 0;"><a href="mailto:sgcxliv@stanford.edu" style="color: #2d4059; text-decoration: none;">sgcxliv@stanford.edu</a></p>
                    </div>
                </div>
            </div>
            
            <h3>Description</h3>
            <p>We take the fact of living for granted, as we should. Why focus on each breath if it just comes and goes without thinking? Or so we think. But the same logic need not apply to the idea of "life" itself. For instance, we speak today of many lives: our love lives, our sex lives, the nightlife, the meaning of life, feeling alive, and so on and so forth. In this course, we will probe into these various facets of our lives today through a critical reflection on the ways we live today (and the ways we talk about life today). But we will also do so by considering how other societies, ancient and foreign (or just hidden in plain sight), have lived (and talked about life) in ways that challenge our very conception of what life entails. All of this will be facilitated through an eclectic array of activities: watching films together, reading poetry and novels, field trips (to an LSD museum or a scent shop), philosophical discussions, and collective writings/vlogging and self-examination. The purpose of this course, in short, is to introduce students to the life of the humanities--or, at the very least, what that life could be.</p>
            
            <h3>Required Materials</h3>
            <ul>
                <li>Your Presence</li>
            </ul>
            
            <h3>Grade Breakdown</h3>
            <ul>
                <li>Weekly Assignments: 35%</li>
                <li>Midterm Exam: 10%</li>
                <li>Final Exam: 20%</li>
                <li>Participation and Engagement: 35%</li>
            </ul>
            
            <h3>Extension Policy</h3>
            <ul>
                <li>Email the Instructor</li>
            </ul>
            
            <h3>Disability & OAE</h3>
            <p>From Stanford's Office of Accessible Education:

Stanford is committed to providing equal educational opportunities for disabled students. Disabled students are a valued and essential part of the Stanford community. We welcome you to our class.

If you experience disability, please register with the Office of Accessible Education (OAE). Professional staff will evaluate your needs, support appropriate and reasonable accommodations, and prepare an Academic Accommodation Letter for faculty. To get started, or to re-initiate services, please visit oae.stanford.edu.

If you already have an Academic Accommodation Letter, we invite you to share your letter with us. Academic Accommodation Letters should be shared at the earliest possible opportunity so we may partner with you and OAE to identify any barriers to access and inclusion that might be encountered in your experience of this course..</p>
        </div>
        
        <!-- Calendar tab content -->
        <div id="calendar" class="tab-content">
            <h2>Course Calendar</h2>
            <p>Below is the schedule for the entire course. Please note that this schedule is subject to change.</p>
            
            <table style="width:100%; border-collapse: collapse; margin-top: 20px;">
                <tr style="background-color: #ddd;">
                    <th style="border: 1px solid #999; padding: 4px;">Week</th>
                    <th style="border: 1px solid #999; padding: 6px;">Date</th>
                    <th style="border: 1px solid #999; padding: 8px;">Topic</th>
                    <th style="border: 1px solid #999; padding: 8px;">Assignments</th>
                    <th style="border: 1px solid #999; padding: 6px;">Time & Place</th>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">1</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 1st</td>
                    <td style="border: 1px solid #999; padding: 8px;">Introductions</td>
                    <td style="border: 1px solid #999; padding: 8px;">Meal & Item Exchange</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">2</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 3rd</td>
                    <td style="border: 1px solid #999; padding: 8px;">Student Life</td>
                    <td style="border: 1px solid #999; padding: 8px;">Bing Nursery Sign-Ups</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">3</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 8th</td>
                    <td style="border: 1px solid #999; padding: 8px;">Family Matters</td>
                    <td style="border: 1px solid #999; padding: 8px;">Upload a Family Photo</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">4</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 10th</td>
                    <td style="border: 1px solid #999; padding: 8px;">Recess</td>
                    <td style="border: 1px solid #999; padding: 8px;">Play!</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">5</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 15th</td>
                    <td style="border: 1px solid #999; padding: 8px;">Making a Living</td>
                    <td style="border: 1px solid #999; padding: 8px;">Interview Clips</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">6</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 17th</td>
                    <td style="border: 1px solid #999; padding: 8px;">Work-Life Balance</td>
                    <td style="border: 1px solid #999; padding: 8px;">?</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">7</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 22nd</td>
                    <td style="border: 1px solid #999; padding: 8px;">Nightlife</td>
                    <td style="border: 1px solid #999; padding: 8px;">Signs of Nightlife</td>
                    <td style="border: 1px solid #999; padding: 8px;">1:30 - 2:50, Room </td>
                </tr>
                <tr>
                    <td style="border: 1px solid #999; padding: 8px;">8</td>
                    <td style="border: 1px solid #999; padding: 8px;">April 24th</td>
                    <td style="border: 1px solid #999; padding: 8px;">Staying Awake</td>
                    <td style="border: 1px solid #999; padding: 8px;">?</td>
                    <td style="border: 1px solid #999; padding: 8px;">9:30 - 10:50, Room </td>
                </tr>
            </table>
        </div>
        
        <!-- Login tab content -->
        <div id="login" class="tab-content">
            <h2>Student Login</h2>
            <p>Please log in to access your audio messaging portal.</p>
            
            <div id="login-form" class="login-form">
                <h3>Login to Your Account</h3>
                <div class="form-group">
                    <label for="username">Email</label>
                    <input type="email" id="username" name="username" placeholder="Enter your Stanford email">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password">
                </div>
                <button class="login-btn" onclick="handleLogin()">Log In</button>
                <p style="text-align: center; margin-top: 15px;">
                    Don't have an account? <a href="#" onclick="showSignupForm()">Sign up</a>
                </p>
            </div>
            
            <div id="signup-form" class="login-form" style="display: none;">
                <h3>Create Student Account</h3>
                <div class="form-group">
                    <label for="signup-name">Full Name</label>
                    <input type="text" id="signup-name" name="signup-name" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label for="signup-email">Stanford Email</label>
                    <input type="email" id="signup-email" name="signup-email" placeholder="Enter your Stanford email">
                    <small style="color: #666; display: block; margin-top: 5px;">Must end with @stanford.edu</small>
                </div>
                <div class="form-group">
                    <label for="signup-password">Password</label>
                    <input type="password" id="signup-password" name="signup-password" placeholder="Create a password">
                </div>
                <div class="form-group">
                    <label for="signup-confirm">Confirm Password</label>
                    <input type="password" id="signup-confirm" name="signup-confirm" placeholder="Confirm your password">
                </div>
                <button class="login-btn" onclick="handleSignup()">Create Account</button>
                <p style="text-align: center; margin-top: 15px;">
                    Already have an account? <a href="#" onclick="showLoginForm()">Log in</a>
                </p>
            </div>
            
            <div id="professor-view" style="display: none;">
                <button class="back-btn" onclick="logout()">Logout</button>
                <div class="student-list">
                    <h3>Student Messages</h3>
                    <div class="student-item" onclick="openStudentChat('student1')">
                        <span class="student-name">Emma Johnson</span>
                        <span class="new-message-indicator">2</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student2')">
                        <span class="student-name">Michael Chen</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student3')">
                        <span class="student-name">Sophia Williams</span>
                        <span class="new-message-indicator">1</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student4')">
                        <span class="student-name">James Rodriguez</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student5')">
                        <span class="student-name">Ava Patel</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student6')">
                        <span class="student-name">Noah Kim</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student7')">
                        <span class="student-name">Olivia Garcia</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student8')">
                        <span class="student-name">William Thompson</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student9')">
                        <span class="student-name">Isabella Martinez</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student10')">
                        <span class="student-name">Benjamin Lee</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student11')">
                        <span class="student-name">Mia Nguyen</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student12')">
                        <span class="student-name">Ethan Davis</span>
                    </div>
                    <div class="student-item" onclick="openStudentChat('student13')">
                        <span class="student-name">Charlotte Wilson</span>
                    </div>
                </div>
            </div>
            
            <div id="student-view" style="display: none;">
                <button class="back-btn" onclick="logout()">Logout</button>
                <div class="messaging-container">
                    <div class="messaging-header">
                        <h3>Audio Messages with Professor Abbasi</h3>
                    </div>
                    <div id="message-area" class="messaging-body">
                        <!-- Messages will be populated here -->
                        <div class="message">
                            <div class="message-time">Apr 1, 2:45 PM</div>
                            <div class="message-content">
                                <audio controls src=""></audio>
                                <div class="message-actions">
                                    <button class="delete-btn" onclick="deleteMessage(this)">Delete</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="messaging-footer">
                        <div class="audio-controls">
                            <button id="record-btn" class="audio-btn" onclick="toggleRecording()">
                                <i>🎤</i> Start Recording
                            </button>
                            <button id="upload-btn" class="audio-btn" onclick="document.getElementById('audio-upload').click()">
                                <i>📎</i> Upload Audio
                            </button>
                            <input type="file" id="audio-upload" class="audio-upload" accept="audio/*" onchange="handleAudioUpload(this)">
                            <span id="recording-indicator" class="recording-indicator">Recording... <span id="timer">0:00</span></span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="professor-chat" style="display: none;">
                <button class="back-btn" onclick="backToProfessorView()">Back to Student List</button>
                <div class="messaging-container">
                    <div class="messaging-header">
                        <h3 id="chat-student-name">Audio Messages with Student</h3>
                    </div>
                    <div id="professor-message-area" class="messaging-body">
                        <!-- Messages will be populated here -->
                    </div>
                    <div class="messaging-footer">
                        <div class="audio-controls">
                            <button id="prof-record-btn" class="audio-btn" onclick="toggleProfessorRecording()">
                                <i>🎤</i> Start Recording
                            </button>
                            <button id="prof-upload-btn" class="audio-btn" onclick="document.getElementById('prof-audio-upload').click()">
                                <i>📎</i> Upload Audio
                            </button>
                            <input type="file" id="prof-audio-upload" class="audio-upload" accept="audio/*" onchange="handleProfessorAudioUpload(this)">
                            <span id="prof-recording-indicator" class="recording-indicator">Recording... <span id="prof-timer">0:00</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer with contact information -->
        <div class="footer">
            This site is managed by Stephanie Cho. Please email <a href="mailto:sgcxliv@stanford.edu">sgcxliv@stanford.edu</a> for any issues.
        </div>
    </div>
    
    <script>
        // Sample student data with conversations
        const studentData = [
            { id: 'student1', name: 'Emma Johnson', newMessages: 2, messages: [
                { timestamp: 'Apr 1, 2:45 PM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Apr 1, 3:15 PM', audioSrc: '#', sender: 'professor' },
                { timestamp: 'Apr 1, 5:22 PM', audioSrc: '#', sender: 'student' }
            ]},
            { id: 'student2', name: 'Michael Chen', newMessages: 0, messages: [
                { timestamp: 'Mar 28, 10:15 AM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 28, 2:30 PM', audioSrc: '#', sender: 'professor' }
            ]},
            { id: 'student3', name: 'Sophia Williams', newMessages: 1, messages: [
                { timestamp: 'Mar 29, 3:40 PM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 30, 11:05 AM', audioSrc: '#', sender: 'professor' },
                { timestamp: 'Apr 1, 9:18 AM', audioSrc: '#', sender: 'student' }
            ]},
            { id: 'student4', name: 'James Rodriguez', newMessages: 0, messages: [
                { timestamp: 'Mar 25, 4:22 PM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 25, 5:38 PM', audioSrc: '#', sender: 'professor' }
            ]},
            { id: 'student5', name: 'Ava Patel', newMessages: 0, messages: [
                { timestamp: 'Mar 26, 1:15 PM', audioSrc: '#', sender: 'student' }
            ]},
            { id: 'student6', name: 'Noah Kim', newMessages: 0, messages: []},
            { id: 'student7', name: 'Olivia Garcia', newMessages: 0, messages: [
                { timestamp: 'Mar 24, 10:30 AM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 24, 2:45 PM', audioSrc: '#', sender: 'professor' }
            ]},
            { id: 'student8', name: 'William Thompson', newMessages: 0, messages: [
                { timestamp: 'Mar 27, 11:20 AM', audioSrc: '#', sender: 'student' }
            ]},
            { id: 'student9', name: 'Isabella Martinez', newMessages: 0, messages: []},
            { id: 'student10', name: 'Benjamin Lee', newMessages: 0, messages: [
                { timestamp: 'Mar 28, 9:50 AM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 28, 3:15 PM', audioSrc: '#', sender: 'professor' }
            ]},
            { id: 'student11', name: 'Mia Nguyen', newMessages: 0, messages: []},
            { id: 'student12', name: 'Ethan Davis', newMessages: 0, messages: [
                { timestamp: 'Mar 29, 2:10 PM', audioSrc: '#', sender: 'student' }
            ]},
            { id: 'student13', name: 'Charlotte Wilson', newMessages: 0, messages: [
                { timestamp: 'Mar 30, 12:45 PM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 30, 4:20 PM', audioSrc: '#', sender: 'professor' }
            ]}
        ];
        
        // Variables for audio recording
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;
        let timerInterval;
        let recordingStartTime;
        let currentStudentId = null;
        
        // Function to handle tab switching
        function openTab(evt, tabName) {
            // Hide all tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // Remove 'active' class from all nav links
            const navLinks = document.querySelectorAll('.navbar a');
            for (let i = 0; i < navLinks.length; i++) {
                navLinks[i].classList.remove('active');
            }
            
            // Remove active class from all dropdowns
            const dropdowns = document.querySelectorAll('.navbar .dropdown');
            for (let i = 0; i < dropdowns.length; i++) {
                dropdowns[i].classList.remove('active');
            }
            
            // Show the specific tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add 'active' class to the link that opened the tab
            evt.currentTarget.classList.add('active');
            
            // Prevent default link behavior
            evt.preventDefault();
        }
        
        // Function to toggle dropdown menu on click
        function toggleDropdown(evt) {
            // Get the parent dropdown element
            const dropdownElement = evt.currentTarget.parentElement;
            
            // Toggle the 'active' class
            dropdownElement.classList.toggle('active');
            
            // Prevent default link behavior
            evt.preventDefault();
            
            // Stop the event from bubbling up
            evt.stopPropagation();
        }
        
        // Simulated student database - in a real application, this would be on a server
        let studentAccounts = [
            { name: 'Emma Johnson', email: 'student@stanford.edu', password: 'password' }
        ];
        
        // Function to show the signup form
        function showSignupForm() {
            document.getElementById('login-form').style.display = 'none';
            document.getElementById('signup-form').style.display = 'block';
        }
        
        // Function to show the login form
        function showLoginForm() {
            document.getElementById('signup-form').style.display = 'none';
            document.getElementById('login-form').style.display = 'block';
        }
        
        // Function to handle student signup
        function handleSignup() {
            const name = document.getElementById('signup-name').value;
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            const confirmPassword = document.getElementById('signup-confirm').value;
            
            // Basic validation
            if (!name || !email || !password || !confirmPassword) {
                alert("Please fill in all fields.");
                return;
            }
            
            // Validate Stanford email format
            if (!email.toLowerCase().endsWith('@stanford.edu')) {
                alert("Please use a valid Stanford email address.");
                return;
            }
            
            // Check if passwords match
            if (password !== confirmPassword) {
                alert("Passwords do not match.");
                return;
            }
            
            // Check if account already exists
            if (studentAccounts.some(account => account.email.toLowerCase() === email.toLowerCase())) {
                alert("An account with this email already exists.");
                return;
            }
            
            // Create new account
            const newStudent = {
                name: name,
                email: email,
                password: password
            };
            
            // Add to student accounts
            studentAccounts.push(newStudent);
            
            // Show success message
            alert("Account created successfully! You can now log in.");
            
            // Clear form and switch back to login
            document.getElementById('signup-name').value = '';
            document.getElementById('signup-email').value = '';
            document.getElementById('signup-password').value = '';
            document.getElementById('signup-confirm').value = '';
            showLoginForm();
        }
        
        // Function to handle login
        function handleLogin() {
            const email = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (!email || !password) {
                alert("Please enter both email and password.");
                return;
            }
            
            // Check if it's the professor login (hard-coded)
            if (email === "professor@stanford.edu" && password === "admin") {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('signup-form').style.display = 'none';
                document.getElementById('professor-view').style.display = 'block';
                document.getElementById('student-view').style.display = 'none';
                return;
            }
            
            // Check if it's a valid student login
            const student = studentAccounts.find(
                account => account.email.toLowerCase() === email.toLowerCase() && account.password === password
            );
            
            if (student) {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('signup-form').style.display = 'none';
                document.getElementById('professor-view').style.display = 'none';
                document.getElementById('student-view').style.display = 'block';
                
                // Update student view with student name
                document.querySelector('.messaging-header h3').textContent = `Audio Messages with Professor Abbasi`;
                
                // Populate the message area with demo messages
                populateStudentMessages();
            } else {
                alert("Invalid email or password. Please try again or create an account.");
            }
        }
        
        // Function to handle logout
        function logout() {
            document.getElementById('login-form').style.display = 'block';
            document.getElementById('signup-form').style.display = 'none';
            document.getElementById('professor-view').style.display = 'none';
            document.getElementById('student-view').style.display = 'none';
            document.getElementById('professor-chat').style.display = 'none';
            
            // Reset form fields
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            
            // Stop any ongoing recording
            if (isRecording) {
                stopRecording();
            }
        }
        
        // Function to open a student chat from professor view
        function openStudentChat(studentId) {
            currentStudentId = studentId;
            const student = studentData.find(s => s.id === studentId);
            
            document.getElementById('professor-view').style.display = 'none';
            document.getElementById('professor-chat').style.display = 'block';
            
            // Set student name in chat header
            document.getElementById('chat-student-name').textContent = `Audio Messages with ${student.name}`;
            
            // Populate message area with this student's messages
            populateProfessorChatMessages(student);
            
            // Reset new message indicator for this student
            student.newMessages = 0;
        }
        
        // Function to go back to professor view
        function backToProfessorView() {
            document.getElementById('professor-view').style.display = 'block';
            document.getElementById('professor-chat').style.display = 'none';
            currentStudentId = null;
            
            // Update the student list UI (to reflect reset new message indicators)
            updateStudentList();
        }
        
        // Function to populate student messages
        function populateStudentMessages() {
            const messageArea = document.getElementById('message-area');
            messageArea.innerHTML = '';
            
            // Add sample messages
            const messages = [
                { timestamp: 'Mar 31, 10:15 AM', audioSrc: '#', sender: 'student' },
                { timestamp: 'Mar 31, 2:30 PM', audioSrc: '#', sender: 'professor' },
                { timestamp: 'Apr 1, 11:45 AM', audioSrc: '#', sender: 'student' }
            ];
            
            messages.forEach(message => {
                const messageElement = createMessageElement(message, true);
                messageArea.appendChild(messageElement);
            });
        }
        
        // Function to populate professor chat messages
        function populateProfessorChatMessages(student) {
            const messageArea = document.getElementById('professor-message-area');
            messageArea.innerHTML = '';
            
            if (student.messages.length === 0) {
                messageArea.innerHTML = '<p style="text-align: center; color: #666;">No messages yet.</p>';
                return;
            }
            
            student.messages.forEach(message => {
                const messageElement = createMessageElement(message, false);
                messageArea.appendChild(messageElement);
            });
        }
        
        // Function to create a message element
        function createMessageElement(message, isStudent) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            timeDiv.textContent = message.timestamp;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const audio = document.createElement('audio');
            audio.controls = true;
            audio.src = message.audioSrc;
            
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'message-actions';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-btn';
            deleteBtn.textContent = 'Delete';
            deleteBtn.onclick = function() {
                deleteMessage(this);
            };
            
            actionsDiv.appendChild(deleteBtn);
            contentDiv.appendChild(audio);
            contentDiv.appendChild(actionsDiv);
            
            messageDiv.appendChild(timeDiv);
            messageDiv.appendChild(contentDiv);
            
            // Add sender indication for the professor view
            if (!isStudent) {
                const senderSpan = document.createElement('span');
                senderSpan.style.fontSize = '12px';
                senderSpan.style.display = 'block';
                senderSpan.style.marginTop = '5px';
                senderSpan.textContent = message.sender === 'professor' ? 'You' : currentStudentId ? studentData.find(s => s.id === currentStudentId).name : 'Student';
                contentDiv.appendChild(senderSpan);
            }
            
            return messageDiv;
        }
        
        // Function to delete a message
        function deleteMessage(button) {
            if (confirm('Are you sure you want to delete this message?')) {
                const messageElement = button.closest('.message');
                messageElement.remove();
            }
        }
        
        // Function to toggle recording (student view)
        function toggleRecording() {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecording();
            }
        }
        
        // Function to toggle recording (professor view)
        function toggleProfessorRecording() {
            if (!isRecording) {
                startProfessorRecording();
            } else {
                stopProfessorRecording();
            }
        }
        
        // Function to start recording (student view)
        function startRecording() {
            // Check for browser support
            if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                alert('Your browser does not support audio recording.');
                return;
            }
            
            // Request microphone access
            navigator.mediaDevices.getUserMedia({ audio: true })
                .then(stream => {
                    audioChunks = [];
                    mediaRecorder = new MediaRecorder(stream);
                    
                    mediaRecorder.ondataavailable = event => {
                        audioChunks.push(event.data);
                    };
                    
                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/mp3' });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        addNewMessage(audioUrl, 'student');
                    };
                    
                    // Start recording
                    mediaRecorder.start();
                    isRecording = true;
                    
                    // Update UI
                    document.getElementById('record-btn').innerHTML = '<i>⏹️</i> Stop Recording';
                    document.getElementById('recording-indicator').style.display = 'inline';
                    
                    // Start the timer
                    recordingStartTime = Date.now();
                    startTimer();
                })
                .catch(error => {
                    console.error('Error accessing microphone:', error);
                    alert('Error accessing microphone. Please check your permissions.');
                });
        }
        
        // Function to start recording (professor view)
        function startProfessorRecording() {
            // Same as startRecording but with different UI elements
            navigator.mediaDevices.getUserMedia({ audio: true })
                .then(stream => {
                    audioChunks = [];
                    mediaRecorder = new MediaRecorder(stream);
                    
                    mediaRecorder.ondataavailable = event => {
                        audioChunks.push(event.data);
                    };
                    
                    mediaRecorder.onstop = () => {
                        const audioBlob = new Blob(audioChunks, { type: 'audio/mp3' });
                        const audioUrl = URL.createObjectURL(audioBlob);
                        addProfessorMessage(audioUrl);
                    };
                    
                    mediaRecorder.start();
                    isRecording = true;
                    
                    document.getElementById('prof-record-btn').innerHTML = '<i>⏹️</i> Stop Recording';
                    document.getElementById('prof-recording-indicator').style.display = 'inline';
                    
                    recordingStartTime = Date.now();
                    startProfessorTimer();
                })
                .catch(error => {
                    console.error('Error accessing microphone:', error);
                    alert('Error accessing microphone. Please check your permissions.');
                });
        }
        
        // Function to stop recording (student view)
        function stopRecording() {
            if (mediaRecorder && isRecording) {
                // Check if recording duration is over 10 minutes
                const recordingDuration = (Date.now() - recordingStartTime) / 1000;
                if (recordingDuration > 600) { // 600 seconds = 10 minutes
                    alert('Recording stopped automatically after 10 minutes.');
                }
                
                mediaRecorder.stop();
                isRecording = false;
                
                // Update UI
                document.getElementById('record-btn').innerHTML = '<i>🎤</i> Start Recording';
                document.getElementById('recording-indicator').style.display = 'none';
                
                // Stop the timer
                clearInterval(timerInterval);
                document.getElementById('timer').textContent = '0:00';
                
                // Stop all tracks in the stream
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        }
        
        // Function to stop recording (professor view)
        function stopProfessorRecording() {
            if (mediaRecorder && isRecording) {
                const recordingDuration = (Date.now() - recordingStartTime) / 1000;
                if (recordingDuration > 600) {
                    alert('Recording stopped automatically after 10 minutes.');
                }
                
                mediaRecorder.stop();
                isRecording = false;
                
                document.getElementById('prof-record-btn').innerHTML = '<i>🎤</i> Start Recording';
                document.getElementById('prof-recording-indicator').style.display = 'none';
                
                clearInterval(timerInterval);
                document.getElementById('prof-timer').textContent = '0:00';
                
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
            }
        }
        
        // Function to start timer (student view)
        function startTimer() {
            const timerElement = document.getElementById('timer');
            let seconds = 0;
            
            timerInterval = setInterval(() => {
                seconds++;
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                timerElement.textContent = `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
                
                // Automatically stop after 10 minutes
                if (seconds >= 600) {
                    stopRecording();
                }
            }, 1000);
        }
        
        // Function to start timer (professor view)
        function startProfessorTimer() {
            const timerElement = document.getElementById('prof-timer');
            let seconds = 0;
            
            timerInterval = setInterval(() => {
                seconds++;
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                timerElement.textContent = `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
                
                if (seconds >= 600) {
                    stopProfessorRecording();
                }
            }, 1000);
        }
        
        // Function to handle audio upload (student view)
        function handleAudioUpload(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                
                // Check if the file is an audio file
                if (!file.type.match('audio.*')) {
                    alert('Please upload an audio file.');
                    return;
                }
                
                // Check file size (max 100MB)
                if (file.size > 100 * 1024 * 1024) {
                    alert('File size exceeds 100MB limit.');
                    return;
                }
                
                const audioUrl = URL.createObjectURL(file);
                addNewMessage(audioUrl, 'student');
                
                // Reset the file input
                input.value = '';
            }
        }
        
        // Function to handle audio upload (professor view)
        function handleProfessorAudioUpload(input) {
            if (input.files && input.files[0]) {
                const file = input.files[0];
                
                if (!file.type.match('audio.*')) {
                    alert('Please upload an audio file.');
                    return;
                }
                
                if (file.size > 100 * 1024 * 1024) {
                    alert('File size exceeds 100MB limit.');
                    return;
                }
                
                const audioUrl = URL.createObjectURL(file);
                addProfessorMessage(audioUrl);
                
                input.value = '';
            }
        }
        
        // Function to add a new message (student view)
        function addNewMessage(audioUrl, sender) {
            const messageArea = document.getElementById('message-area');
            
            // Create message elements
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            const now = new Date();
            const formattedTime = `${now.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}, ${now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true })}`;
            timeDiv.textContent = formattedTime;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const audio = document.createElement('audio');
            audio.controls = true;
            audio.src = audioUrl;
            
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'message-actions';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-btn';
            deleteBtn.textContent = 'Delete';
            deleteBtn.onclick = function() {
                deleteMessage(this);
            };
            
            actionsDiv.appendChild(deleteBtn);
            contentDiv.appendChild(audio);
            contentDiv.appendChild(actionsDiv);
            
            messageDiv.appendChild(timeDiv);
            messageDiv.appendChild(contentDiv);
            
            // Add to message area
            messageArea.appendChild(messageDiv);
            messageArea.scrollTop = messageArea.scrollHeight;
        }
        
        // Function to add a new message (professor view)
        function addProfessorMessage(audioUrl) {
            if (!currentStudentId) return;
            
            const messageArea = document.getElementById('professor-message-area');
            
            // Create message elements similar to addNewMessage
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const timeDiv = document.createElement('div');
            timeDiv.className = 'message-time';
            const now = new Date();
            const formattedTime = `${now.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}, ${now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true })}`;
            timeDiv.textContent = formattedTime;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            
            const audio = document.createElement('audio');
            audio.controls = true;
            audio.src = audioUrl;
            
            const actionsDiv = document.createElement('div');
            actionsDiv.className = 'message-actions';
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'delete-btn';
            deleteBtn.textContent = 'Delete';
            deleteBtn.onclick = function() {
                deleteMessage(this);
            };
            
            actionsDiv.appendChild(deleteBtn);
            contentDiv.appendChild(audio);
            contentDiv.appendChild(actionsDiv);
            
            // Add sender indication
            const senderSpan = document.createElement('span');
            senderSpan.style.fontSize = '12px';
            senderSpan.style.display = 'block';
            senderSpan.style.marginTop = '5px';
            senderSpan.textContent = 'You';
            contentDiv.appendChild(senderSpan);
            
            messageDiv.appendChild(timeDiv);
            messageDiv.appendChild(contentDiv);
            
            // Add to message area
            messageArea.appendChild(messageDiv);
            messageArea.scrollTop = messageArea.scrollHeight;
            
            // Update student data
            const student = studentData.find(s => s.id === currentStudentId);
            if (student) {
                student.messages.push({
                    timestamp: formattedTime,
                    audioSrc: audioUrl,
                    sender: 'professor'
                });
            }
        }
        
        // Function to update the student list UI
        function updateStudentList() {
            const studentList = document.querySelector('.student-list');
            studentList.innerHTML = '<h3>Student Messages</h3>';
            
            studentData.forEach(student => {
                const studentItem = document.createElement('div');
                studentItem.className = 'student-item';
                studentItem.onclick = function() {
                    openStudentChat(student.id);
                };
                
                const nameSpan = document.createElement('span');
                nameSpan.className = 'student-name';
                nameSpan.textContent = student.name;
                
                studentItem.appendChild(nameSpan);
                
                if (student.newMessages > 0) {
                    const newMessageIndicator = document.createElement('span');
                    newMessageIndicator.className = 'new-message-indicator';
                    newMessageIndicator.textContent = student.newMessages;
                    studentItem.appendChild(newMessageIndicator);
                }
                
                studentList.appendChild(studentItem);
            });
        }
        
        // Add click event listener to document to close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdowns = document.querySelectorAll('.navbar .dropdown');
            for (let i = 0; i < dropdowns.length; i++) {
                if (!dropdowns[i].contains(event.target)) {
                    dropdowns[i].classList.remove('active');
                }
            }
        });
    </script>
</body>
</html>